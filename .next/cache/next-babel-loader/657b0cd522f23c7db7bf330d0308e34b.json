{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/brendanquinn/Projects/get-a-vin/pages/index.jsx\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport copyToClipboard from 'copy-to-clipboard';\nimport { getRandomVin } from '../data/vins.js';\nimport axios from 'axios';\nvar VIN_DETAILS_DOMAIN = process.env.VIN_DETAILS_DOMAIN;\n\nvar getVehicleByVin = function getVehicleByVin(vin) {\n  var url = \"\".concat(VIN_DETAILS_DOMAIN, \"/api/vehicles/DecodeVinExtended/\").concat(vin, \"?format=json\");\n  console.log(\"Fetching VIN info from: \".concat(url));\n  return axios.get(url).then(function (resp) {\n    return resp.data.Results.filter(function (r) {\n      return r.Variable;\n    }).filter(function (r) {\n      return r.Value;\n    });\n  }).then(function (results) {\n    return results.reduce(function (sum, r) {\n      return _objectSpread({}, sum, _defineProperty({}, r.Variable, r.Value));\n    }, {});\n  });\n};\n\nvar Index = /*#__PURE__*/function (_React$Component) {\n  _inherits(Index, _React$Component);\n\n  var _super = _createSuper(Index);\n\n  function Index(props) {\n    var _this;\n\n    _classCallCheck(this, Index);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      vins: {},\n      errorMessage: null\n    });\n\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_this));\n    _this.copyVin = _this.copyVin.bind(_assertThisInitialized(_this));\n    _this.getVins = _this.getVins.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Index, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var vin = this.getVins()[0];\n      getVehicleByVin(vin).then(function (vehicleInfo) {\n        _this2.setState({\n          vins: _defineProperty({}, vin, vehicleInfo),\n          errorMessage: null\n        });\n      })[\"catch\"](function (e) {\n        console.error(e);\n\n        _this2.setState({\n          errorMessage: e.message\n        });\n      });\n    }\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit(e) {\n      var _this3 = this;\n\n      e.preventDefault();\n      var vin = getRandomVin();\n      getVehicleByVin(vin).then(function (vehicleInfo) {\n        _this3.setState({\n          vins: _objectSpread(_defineProperty({}, vin, vehicleInfo), _this3.state.vins),\n          errorMessage: null\n        });\n      }).then(function () {\n        return copyToClipboard(vin);\n      })[\"catch\"](function (e) {\n        console.error(e);\n\n        _this3.setState({\n          errorMessage: e.message\n        });\n      });\n    }\n  }, {\n    key: \"copyVin\",\n    value: function copyVin() {\n      copyToClipboard(this.getVins()[0]);\n    }\n  }, {\n    key: \"getVins\",\n    value: function getVins() {\n      return Object.keys(this.state.vins);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return __jsx(\"main\", {\n        id: \"main\"\n      }, __jsx(\"h1\", null, \"Generate a \", __jsx(\"abbr\", {\n        title: \"Vehicle Identification Number\"\n      }, \"VIN\")), __jsx(\"p\", null, \"Making it easy to generate and copy \", __jsx(\"abbr\", {\n        title: \"Vehicle Identification Numbers\"\n      }, \"VINs\")), __jsx(\"form\", {\n        onSubmit: this.onSubmit\n      }, __jsx(\"h2\", {\n        \"aria-live\": \"polite\"\n      }, \"Result: \", __jsx(\"em\", null, this.getVins()[0])), __jsx(\"button\", {\n        type: \"button\",\n        onClick: this.copyVin\n      }, \"Copy to Clipboard\"), __jsx(\"button\", {\n        type: \"submit\"\n      }, \"Get and Copy new VIN\"), this.state.errorMessage ? __jsx(React.Fragment, null, __jsx(\"h4\", null, \"Error:\"), __jsx(\"p\", null, this.state.errorMessage)) : __jsx(React.Fragment, null, __jsx(\"h3\", null, \"Vehicle Info\"), __jsx(\"pre\", null, __jsx(\"code\", null, function (vehicleInfo) {\n        return vehicleInfo ? JSON.stringify(vehicleInfo, null, 4) : 'Loading...';\n      }(this.state.vins[this.getVins()[0]]))))), this.getVins().length > 1 ? __jsx(\"section\", null, __jsx(\"h2\", null, \"History\"), __jsx(\"dl\", null, this.getVins().slice(1).map(function (v) {\n        return __jsx(React.Fragment, null, __jsx(\"dt\", {\n          key: \"\".concat(v, \"-term\")\n        }, v), __jsx(\"dd\", {\n          key: \"\".concat(v, \"-definition\")\n        }, __jsx(\"pre\", null, __jsx(\"code\", null, JSON.stringify(_this4.state.vins[v], null, 4)))));\n      }))) : null);\n    }\n  }]);\n\n  return Index;\n}(React.Component);\n\nexport default Index;","map":{"version":3,"sources":["/Users/brendanquinn/Projects/get-a-vin/pages/index.jsx"],"names":["React","copyToClipboard","getRandomVin","axios","VIN_DETAILS_DOMAIN","process","env","getVehicleByVin","vin","url","console","log","get","then","resp","data","Results","filter","r","Variable","Value","results","reduce","sum","Index","props","vins","errorMessage","onSubmit","bind","copyVin","getVins","vehicleInfo","setState","e","error","message","preventDefault","state","Object","keys","JSON","stringify","length","slice","map","v","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport copyToClipboard from 'copy-to-clipboard';\nimport { getRandomVin } from '../data/vins.js';\nimport axios from 'axios';\n\nconst VIN_DETAILS_DOMAIN = process.env.VIN_DETAILS_DOMAIN;\n\nconst getVehicleByVin = (vin) => {\n    const url = `${VIN_DETAILS_DOMAIN}/api/vehicles/DecodeVinExtended/${vin}?format=json`\n    console.log(`Fetching VIN info from: ${url}`)\n    return axios.get(url)\n    .then(resp => resp.data.Results\n        .filter(r => r.Variable)\n        .filter(r => r.Value))\n    .then(results => results.reduce((sum, r) => ({ ...sum, [r.Variable]: r.Value }), {}))\n}\n\nclass Index extends React.Component {\n    state = {\n        vins: {},\n        errorMessage: null\n    };\n\n    constructor(props) {\n        super(props);\n        this.onSubmit = this.onSubmit.bind(this);\n        this.copyVin = this.copyVin.bind(this);\n        this.getVins = this.getVins.bind(this);\n    }\n\n    componentDidMount() {\n        const vin = this.getVins()[0];\n        getVehicleByVin(vin)\n            .then(vehicleInfo => {\n                this.setState({ vins: { [vin]: vehicleInfo }, errorMessage: null });\n            })\n            .catch(e => {\n                console.error(e)\n                this.setState({ errorMessage: e.message })\n            })\n    }\n\n    onSubmit(e) {\n        e.preventDefault();\n        const vin = getRandomVin();\n        getVehicleByVin(vin)\n            .then(vehicleInfo => {\n                this.setState({ vins: { [vin]: vehicleInfo, ...this.state.vins }, errorMessage: null });\n            })\n            .then(() => copyToClipboard(vin))\n            .catch(e => {\n                console.error(e)\n                this.setState({ errorMessage: e.message })\n            });\n    }\n\n    copyVin() {\n        copyToClipboard(this.getVins()[0]);\n    }\n\n    getVins() {\n        return Object.keys(this.state.vins);\n    }\n\n    render() {\n        return (\n            <main id=\"main\">\n                <h1>Generate a <abbr title=\"Vehicle Identification Number\">VIN</abbr></h1>\n                <p>Making it easy to generate and copy <abbr title=\"Vehicle Identification Numbers\">VINs</abbr></p>\n\n                <form onSubmit={this.onSubmit}>\n                    <h2 aria-live=\"polite\">Result: <em>{this.getVins()[0]}</em></h2>\n                    <button type=\"button\" onClick={this.copyVin}>Copy to Clipboard</button>\n                    <button type=\"submit\">Get and Copy new VIN</button>\n                    {\n                        this.state.errorMessage\n                            ? (<><h4>Error:</h4><p>{this.state.errorMessage}</p></>)\n                            : (\n                                <>\n                                    <h3>Vehicle Info</h3>\n                                    <pre><code>\n                                        {\n                                            ((vehicleInfo) => {\n                                                return vehicleInfo\n                                                    ? (\n                                                        JSON.stringify(vehicleInfo, null, 4)\n                                                    )\n                                                    : 'Loading...'\n                                            })(this.state.vins[this.getVins()[0]])\n                                        }\n                                    </code></pre>\n                                </>\n                            )\n                    }\n                </form>\n\n                {\n                    this.getVins().length > 1\n                    ? (\n                        <section>\n                            <h2>History</h2>\n                            <dl>\n                                {this.getVins().slice(1).map((v) => (\n                                    <>\n                                        <dt key={`${v}-term`}>\n                                            {v}\n                                        </dt>\n                                        <dd key={`${v}-definition`}>\n                                            <pre><code>{JSON.stringify(this.state.vins[v], null, 4)}</code></pre>\n                                        </dd>\n                                    </>\n                                ))}\n                            </dl>\n                        </section>\n                    )\n                    : null\n                }\n            </main>\n        );\n    }\n}\n\nexport default Index;"]},"metadata":{},"sourceType":"module"}