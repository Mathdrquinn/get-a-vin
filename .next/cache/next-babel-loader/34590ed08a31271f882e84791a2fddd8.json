{"ast":null,"code":"var _jsxFileName = \"/Users/brendanquinn/Projects/get-a-vin/pages/index.jsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport copyToClipboard from 'copy-to-clipboard';\nimport axios from 'axios';\nconst GET_VIN_URL = process.env.GET_VIN_URL;\nconst VIN_DETAILS_DOMAIN = process.env.VIN_DETAILS_DOMAIN;\n\nconst getVehicleByVin = vin => {\n  const url = `${VIN_DETAILS_DOMAIN}/api/vehicles/DecodeVinExtended/${vin}?format=json`;\n  console.log(`Fetching VIN info from: ${url}`);\n  return axios.get(url).then(resp => resp.data.Results.filter(r => r.Variable).filter(r => r.Value)).then(results => results.reduce((sum, r) => _objectSpread({}, sum, {\n    [r.Variable]: r.Value\n  }), {}));\n};\n\nconst getRandomVin = () => {\n  console.log(`Fetching random VIN from: ${GET_VIN_URL}`);\n  return axios.get(GET_VIN_URL).then(resp => resp.data);\n};\n\nclass Index extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"state\", {\n      vins: {},\n      errorMessage: null\n    });\n\n    this.onSubmit = this.onSubmit.bind(this);\n    this.copyVin = this.copyVin.bind(this);\n    this.getVins = this.getVins.bind(this);\n  }\n\n  componentDidMount() {\n    getRandomVin().then(data => data.vin).then(vin => {\n      return getVehicleByVin(vin).then(vehicleInfo => {\n        this.setState({\n          vins: {\n            [vin]: vehicleInfo\n          },\n          errorMessage: null\n        });\n      });\n    }).catch(e => {\n      console.error(e);\n      this.setState({\n        errorMessage: e.message\n      });\n    });\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    getRandomVin().then(data => data.vin).then(vin => {\n      return getVehicleByVin(vin).then(vehicleInfo => {\n        this.setState({\n          vins: _objectSpread({\n            [vin]: vehicleInfo\n          }, this.state.vins),\n          errorMessage: null\n        });\n      }).then(() => copyToClipboard(vin));\n    }).catch(e => {\n      console.error(e);\n      this.setState({\n        errorMessage: e.message\n      });\n    });\n  }\n\n  copyVin() {\n    copyToClipboard(this.getVins()[0]);\n  }\n\n  getVins() {\n    return Object.keys(this.state.vins);\n  }\n\n  render() {\n    return __jsx(\"main\", {\n      id: \"main\"\n    }, __jsx(\"h1\", null, \"Generate a \", __jsx(\"abbr\", {\n      title: \"Vehicle Identification Number\"\n    }, \"VIN\")), __jsx(\"p\", null, \"Making it easy to generate and copy \", __jsx(\"abbr\", {\n      title: \"Vehicle Identification Numbers\"\n    }, \"VINs\")), __jsx(\"form\", {\n      onSubmit: this.onSubmit\n    }, __jsx(\"h2\", {\n      \"aria-live\": \"polite\"\n    }, \"Result: \", __jsx(\"em\", null, this.getVins()[0])), __jsx(\"button\", {\n      type: \"button\",\n      onClick: this.copyVin\n    }, \"Copy to Clipboard\"), __jsx(\"button\", {\n      type: \"submit\"\n    }, \"Get and Copy new VIN\"), this.state.errorMessage ? __jsx(React.Fragment, null, __jsx(\"h4\", null, \"Error:\"), __jsx(\"p\", null, this.state.errorMessage)) : __jsx(React.Fragment, null, __jsx(\"h3\", null, \"Vehicle Info\"), __jsx(\"pre\", null, __jsx(\"code\", null, (vehicleInfo => {\n      return vehicleInfo ? JSON.stringify(vehicleInfo, null, 4) : 'Loading...';\n    })(this.state.vins[this.getVins()[0]]))))), this.getVins().length > 1 ? __jsx(\"section\", null, __jsx(\"h2\", null, \"History\"), __jsx(\"dl\", null, this.getVins().slice(1).map(v => __jsx(React.Fragment, null, __jsx(\"dt\", {\n      key: `${v}-term`\n    }, v), __jsx(\"dd\", {\n      key: `${v}-definition`\n    }, __jsx(\"pre\", null, __jsx(\"code\", null, JSON.stringify(this.state.vins[v], null, 4)))))))) : null);\n  }\n\n}\n\nexport default Index;","map":{"version":3,"sources":["/Users/brendanquinn/Projects/get-a-vin/pages/index.jsx"],"names":["React","copyToClipboard","axios","GET_VIN_URL","process","env","VIN_DETAILS_DOMAIN","getVehicleByVin","vin","url","console","log","get","then","resp","data","Results","filter","r","Variable","Value","results","reduce","sum","getRandomVin","Index","Component","constructor","props","vins","errorMessage","onSubmit","bind","copyVin","getVins","componentDidMount","vehicleInfo","setState","catch","e","error","message","preventDefault","state","Object","keys","render","JSON","stringify","length","slice","map","v"],"mappings":"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","sourcesContent":["import React from 'react';\nimport copyToClipboard from 'copy-to-clipboard';\nimport axios from 'axios';\n\nconst GET_VIN_URL = process.env.GET_VIN_URL;\nconst VIN_DETAILS_DOMAIN = process.env.VIN_DETAILS_DOMAIN;\n\nconst getVehicleByVin = (vin) => {\n    const url = `${VIN_DETAILS_DOMAIN}/api/vehicles/DecodeVinExtended/${vin}?format=json`\n    console.log(`Fetching VIN info from: ${url}`)\n    return axios.get(url)\n    .then(resp => resp.data.Results\n        .filter(r => r.Variable)\n        .filter(r => r.Value))\n    .then(results => results.reduce((sum, r) => ({ ...sum, [r.Variable]: r.Value }), {}))\n}\n\nconst getRandomVin = () => {\n    console.log(`Fetching random VIN from: ${GET_VIN_URL}`)\n    return axios.get(GET_VIN_URL)\n    .then(resp => resp.data)\n}\n\nclass Index extends React.Component {\n    state = {\n        vins: {},\n        errorMessage: null\n    };\n\n    constructor(props) {\n        super(props);\n        this.onSubmit = this.onSubmit.bind(this);\n        this.copyVin = this.copyVin.bind(this);\n        this.getVins = this.getVins.bind(this);\n    }\n\n    componentDidMount() {\n        getRandomVin()\n            .then(data => data.vin)\n            .then(vin => {\n                return getVehicleByVin(vin)\n                        .then(vehicleInfo => {\n                            this.setState({ vins: { [vin]: vehicleInfo }, errorMessage: null });\n                        })\n            })\n            .catch(e => {\n                console.error(e)\n                this.setState({ errorMessage: e.message })\n            })\n    }\n\n    onSubmit(e) {\n        e.preventDefault();\n        getRandomVin()\n            .then(data => data.vin)\n            .then(vin => {\n                return getVehicleByVin(vin)\n                    .then(vehicleInfo => {\n                        this.setState({ vins: { [vin]: vehicleInfo, ...this.state.vins }, errorMessage: null });\n                    })\n                    .then(() => copyToClipboard(vin))\n            })\n            .catch(e => {\n                console.error(e)\n                this.setState({ errorMessage: e.message })\n            });\n    }\n\n    copyVin() {\n        copyToClipboard(this.getVins()[0]);\n    }\n\n    getVins() {\n        return Object.keys(this.state.vins);\n    }\n\n    render() {\n        return (\n            <main id=\"main\">\n                <h1>Generate a <abbr title=\"Vehicle Identification Number\">VIN</abbr></h1>\n                <p>Making it easy to generate and copy <abbr title=\"Vehicle Identification Numbers\">VINs</abbr></p>\n\n                <form onSubmit={this.onSubmit}>\n                    <h2 aria-live=\"polite\">Result: <em>{this.getVins()[0]}</em></h2>\n                    <button type=\"button\" onClick={this.copyVin}>Copy to Clipboard</button>\n                    <button type=\"submit\">Get and Copy new VIN</button>\n                    {\n                        this.state.errorMessage\n                            ? (<><h4>Error:</h4><p>{this.state.errorMessage}</p></>)\n                            : (\n                                <>\n                                    <h3>Vehicle Info</h3>\n                                    <pre><code>\n                                        {\n                                            ((vehicleInfo) => {\n                                                return vehicleInfo\n                                                    ? (\n                                                        JSON.stringify(vehicleInfo, null, 4)\n                                                    )\n                                                    : 'Loading...'\n                                            })(this.state.vins[this.getVins()[0]])\n                                        }\n                                    </code></pre>\n                                </>\n                            )\n                    }\n                </form>\n\n                {\n                    this.getVins().length > 1\n                    ? (\n                        <section>\n                            <h2>History</h2>\n                            <dl>\n                                {this.getVins().slice(1).map((v) => (\n                                    <>\n                                        <dt key={`${v}-term`}>\n                                            {v}\n                                        </dt>\n                                        <dd key={`${v}-definition`}>\n                                            <pre><code>{JSON.stringify(this.state.vins[v], null, 4)}</code></pre>\n                                        </dd>\n                                    </>\n                                ))}\n                            </dl>\n                        </section>\n                    )\n                    : null\n                }\n            </main>\n        );\n    }\n}\n\nexport default Index;"]},"metadata":{},"sourceType":"module"}